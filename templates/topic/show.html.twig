{% extends 'base.html.twig' %}

{% block breadcrumbs %}
	&rarr; <a href = "#"> {{ topic.title }}</a>
{% endblock %}

{% block body %}
	<div id="topic_show">
		{# <div id = "topic" class = "border p-2 mb-3"> #}
		{# <div class="title fw-bold text-center pb-1">{{topic.title}}</div> #}
		{# <div class="date text-end fw-bold pe-2">{{topic.date|date("d/m/Y")}}</div> #}
		{# <br> #}
		{# <div class="author"><span class = "fw-bold">Author:</span> {{topic.user.email}}</div> #}
		{# </div> #}

		<div class="position-relative pb-3 mb-4">
			<a href="{{path("post_create", {topic_id: topic.id})}}" class="position-absolute btn btn-primary px-3 py-1 end-0 top-0">Napisz posta</a>
		</div>

		<div>
			<div class="banner py-3 ps-2 text-white">
				Posty
			</div>
			{% if topic.posts is empty %}
				<div class="text-center fw-bold">
					Tu jeszcze nic nie ma
				</div>
			{% else %}
				<div class="items">
					{% for post in topic.posts %}
						<div class="bg-light d-flex item">
							<div class = "col-2 col-sm-1 position-relative">
								<img class="avatar center d-block p-2" src="{{ asset('images/avatar.png') }}"/>
							</div>

							<div class = "col-9 col-sm-10 p-3">
								<a class=" d-block" href="{{path("post_show", {id: post.id})}}" role="button">
									{{ post.title }} ({{post.comments|length}})
								</a>
								<div>{{post.user.email}}, {{post.date|ago}}</div>
							</div>

							{% if app.user and app.user.id == post.user.id %}
								<a class="border-start col-1 d-block position-relative" href="{{ path( 'post_edit', { id: post.id } ) }}">
									<img class = "center" src="{{ asset('images/settings.png') }}"/>
								</a>
							{% endif %}
						</div>
					{% endfor %}
				</div>
			{% endif %}
		</div>
	</div>
{% endblock %}
